---
description: Python Type System
alwaysApply: false
---

# Python Type System

`mypy --strict` is the baseline. Type hints enable tooling, prevent bugs, and serve as living documentation.

## Function Signatures

```python
from collections.abc import Sequence, Callable

def process_items(
    items: Sequence[Item], *, transform: Callable[[Item], Result],
) -> list[Result]: ...

async def fetch_user(user_id: str) -> User | None: ...
```

## Modern Syntax (3.10+)

```python
def parse(value: str | int) -> Data: ...  # Union with |
names: list[str] = []                      # Built-in generics
config: dict[str, Any] = {}
```

## Protocol (Structural Subtyping)

```python
class Renderable(Protocol):
    def render(self) -> str: ...

class HTMLWidget:
    def render(self) -> str:
        return "<div>widget</div>"

def display(item: Renderable) -> None:  # Structural match
    print(item.render())
```

## Generics

```python
T = TypeVar("T")

class Stack(Generic[T]):
    def push(self, item: T) -> None: ...
    def pop(self) -> T: ...

# Python 3.12+
def first[T](items: Sequence[T]) -> T:
    return items[0]
```

## TypedDict, Literal, Final

```python
class UserDict(TypedDict):
    id: str
    name: Required[str]

def set_log_level(level: Literal["debug", "info", "warn", "error"]) -> None: ...
```

## Anti-Patterns

```python
# Never: Any as a crutch
def process(data: Any) -> Any: ...  # Just untyped Python
# Never: type: ignore without explanation
result = sketchy_call()  # type: ignore  # WHY?
# Never: Mutable default arguments
def append_to(item: str, target: list[str] = []) -> list[str]: ...  # BUG
```
