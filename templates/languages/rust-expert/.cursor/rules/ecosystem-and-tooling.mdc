---
description: Rust Ecosystem and Tooling
alwaysApply: false
---

# Rust Ecosystem and Tooling

The toolchain is best-in-class. Know the tools and community-standard crates.

## Cargo.toml

```toml
[package]
name = "my-crate"
version = "0.1.0"
edition = "2021"
rust-version = "1.75"

[dependencies]
serde = { version = "1", features = ["derive"] }
tokio = { version = "1", features = ["full"] }

[profile.release]
lto = true
codegen-units = 1
strip = true

# Feature flags must be additive
[features]
default = []
metrics = ["prometheus"]
```

## Essential Crates

- **Serialization:** serde, serde_json, toml
- **Async:** tokio
- **Web:** axum, reqwest, tonic (gRPC)
- **Database:** sqlx (compile-time checked), diesel
- **Errors:** thiserror (libraries), anyhow (applications)
- **CLI:** clap
- **Observability:** tracing, metrics, opentelemetry
- **Testing:** proptest, criterion, mockall, wiremock, insta

## Linting and Formatting

```rust
// In lib.rs or main.rs
#![warn(clippy::all, clippy::pedantic)]
#![deny(clippy::unwrap_used)]
#![deny(unsafe_code)]  // Unless explicitly needed
```

```toml
# rustfmt.toml
edition = "2021"
max_width = 100
imports_granularity = "Crate"
```

## CI Essentials

```bash
cargo fmt -- --check
cargo clippy --all-targets --all-features -- -D warnings
cargo test --all-features
cargo audit
cargo deny check
```

## Dependency Hygiene

- `cargo audit` for security advisories; `cargo deny check` for licenses
- Minimize dependencies â€” each is attack surface and compile time
- Use `[workspace.dependencies]` for consistency across workspace
- Only enable features you actually use
