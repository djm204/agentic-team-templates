---
description: Shared Types
alwaysApply: false
---

# Shared Types

Strategies for sharing types between frontend and backend.

## Why Share Types

- **Single source of truth** — define once, use everywhere
- **Compile-time safety** — catch mismatches before runtime
- **Refactoring confidence** — changes propagate automatically

## Shared Validation Schemas

Derive types from Zod schemas so runtime validation and static types stay in sync:

```ts
import { z } from 'zod';
export const CreateUserSchema = z.object({
  email: z.string().email(),
  name: z.string().min(1).max(100),
  role: z.enum(['user', 'admin']).default('user'),
});
export type CreateUserInput = z.infer<typeof CreateUserSchema>;
```

Both sides import the same schema:

```ts
// Backend
const result = CreateUserSchema.safeParse(req.body);
if (!result.success) return res.status(422).json({ error: result.error });
// Frontend
const form = useForm<CreateUserInput>({ resolver: zodResolver(CreateUserSchema) });
```

## API Response & Error Types

```ts
export interface ApiResponse<T> { data: T; }
export interface PaginatedResponse<T> {
  data: T[];
  pagination: { page: number; limit: number; total: number };
}
export const ErrorCode = {
  VALIDATION_ERROR: 'VALIDATION_ERROR',
  NOT_FOUND: 'NOT_FOUND',
  UNAUTHORIZED: 'UNAUTHORIZED',
} as const;
export type ErrorCode = typeof ErrorCode[keyof typeof ErrorCode];
export interface AppError { code: ErrorCode; message: string; details?: unknown; }
```

## Date Handling

Dates serialize to strings in JSON — define internal and DTO types with transformers:

```ts
export interface User { id: string; name: string; createdAt: Date; }
export interface UserDTO { id: string; name: string; createdAt: string; }
export const toUserDTO = (u: User): UserDTO => ({ ...u, createdAt: u.createdAt.toISOString() });
```

## Best Practices

- Keep the shared package minimal — no frontend or backend deps
- Use `const` objects with `as const` for enum-like values
- Export explicitly; enable `strict: true` in shared `tsconfig.json`

## Anti-Patterns

- Duplicating types across frontend and backend instead of sharing
- Putting framework-specific code (React hooks, Express middleware) in shared
- Using `any` to bridge type mismatches between client and server
